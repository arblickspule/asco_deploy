(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"712a":function(t,e,o){"use strict";var n=o("9180"),s=o.n(n);s.a},9180:function(t,e,o){},f2d6:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"flex-grow"},[o("div",{staticClass:"q-pa-md q-gutter-sm"},[o("q-breadcrumbs",[o("q-breadcrumbs-el",{attrs:{label:"Home",to:"/"}}),t._l(t.splitRoute,(function(t){return o("q-breadcrumbs-el",{key:t,attrs:{label:t,to:"/"+t}})}))],2)],1),t.isSlugged?t._e():o("div",[o("q-toolbar",[o("q-toolbar-title",[o("strong",[t._v("Blog")])]),o("q-btn-dropdown",{attrs:{label:"Sort by date",icon:"sort"}},[o("q-toggle",{attrs:{label:"Descending"},on:{input:t.loadBlogPosts},model:{value:t.sortDateDescending,callback:function(e){t.sortDateDescending=e},expression:"sortDateDescending"}})],1),o("q-btn-dropdown",{attrs:{label:"Filter Tags",icon:"filter"}},t._l(t.tags,(function(e){return o("q-toggle",{key:e.name,attrs:{label:e.name},on:{input:t.loadBlogPosts},model:{value:e.filtered,callback:function(o){t.$set(e,"filtered",o)},expression:"tag.filtered"}})})),1)],1),t.loading?o("q-card",[o("q-card-section",[o("q-spinner-ball",{attrs:{color:"primary",size:"8em"}})],1)],1):t._e(),t.loading?t._e():o("q-virtual-scroll",{staticStyle:{"max-height":"100%",width:"100%"},attrs:{items:t.posts,separator:""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[o("q-item",{key:n.slug,staticStyle:{width:"100%"}},[o("blog-post",{attrs:{post:n,mode:!t.isSlugged}})],1)]}}],null,!1,750994126)})],1),t.isSlugged?o("div",[o("blog-post",{attrs:{post:t.singlePost,mode:!t.isSlugged}})],1):t._e()])},s=[],a=(o("ac6a"),o("cadf"),o("551c"),o("06db"),o("097d"),o("7f7f"),o("28a5"),o("c197")),r=o.n(a),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-card",{staticClass:"post",class:{teaser:t.mode}},[o("q-card-section",[o("router-link",{attrs:{to:t.computeLink}},[o("h4",[t._v(t._s(t.post.title))])])],1),o("q-card-section",{staticClass:"blogPostFade"},[o("div",{domProps:{innerHTML:t._s(t.computeMarkupContent)}})]),t.mode?o("q-card-section",[o("p",[t._v("Posted by Arblick Spule on "+t._s(t.computeDate))])]):t._e()],1)},l=[],c={props:{preview:{type:Boolean,default:!0},mode:{type:Boolean,default:!0},post:{type:Object,default:function(){return{title:"...",body:"...",author:"...",created_on:"..."}}}},data:function(){return{}},computed:{computeMarkupContent:function(){return this.post.content},computeImg:function(){return this.img},computeLink:function(){return"/blog/"+this.post.title_slug},computeDate:function(){return new Date(1e3*this.post._created)}}},u=c,g=(o("712a"),o("2877")),d=o("f09f"),p=o("a370"),f=o("eebe"),m=o.n(f),h=Object(g["a"])(u,i,l,!1,null,"795128c9",null),b=h.exports;m()(h,"components",{QCard:d["a"],QCardSection:p["a"]});var q={name:"PageBlog",components:{blogPost:b},props:["query"],data:function(){return{posts:[],foo:"bar",prism:r.a,sortDateDescending:!0,tags:[],filters:[{name:"status",value:"Published"}],loading:!1}},computed:{isSlugged:function(){return"undefined"!==typeof this.$route.params.slug},splitRoute:function(){return console.log(this.$route),this.$route.path.substring(1).split("/")},singlePost:function(){var t=this.posts.map((function(t){return t.title_slug})),e=t.indexOf(this.$route.params.slug);return this.posts[e]}},watch:{$route:"loadBlogPosts"},mounted:function(){this.loadTags(),this.loadBlogPosts()},methods:{loadBlogPosts:function(){var t=this;this.loading=!0;for(var e={sort:{_created:this.sortDateDescending?-1:0}},o=0;o<this.tags.length;o++)this.tags[o].filtered&&(console.log(e),"filter"in e||(e.filter={tags:[]}),e.filter.tags.push(this.tags[o].name));console.log("woowoo",this.$qs.stringify(e,{encode:!1,arrayFormat:"repeat"})),this.$api.get("/collections/get/blogcontent?"+this.$qs.stringify(e,{arrayFormat:"repeat"})).then((function(e){t.posts=e.data.entries})).catch((function(){t.loading=!1,t.$q.notify({color:"negative",position:"top",message:"Nowt from the server!",icon:"report_problem"})})).finally((function(){t.loading=!1,setTimeout((function(){t.prism.highlightAll()}),500)}))},loadTags:function(){var t=this;this.tags=[];var e={fields:{tags:1}};this.$api.get("/collections/get/blogcontent?"+this.$qs.stringify(e)).then((function(e){e.data.entries.forEach((function(e){console.log(e),e.tags.length>0&&e.tags.forEach((function(e){var o=t.tags.map((function(t){return t.name})),n=o.indexOf(e);n<0?t.tags.push({name:e,count:1,filtered:!1}):t.tags[n].count++})),t.tags.sort((function(t,e){return parseInt(e.count)-parseInt(t.count)}))}))})).catch((function(){t.loading=!1,t.$q.notify({color:"negative",position:"top",message:"Issue getting tags, innit.",icon:"report_problem"})}))},pathToApi:function(){return console.log(this.$route.params.slug),"/collections/get/blogcontent"}}},v=q,_=o("9989"),y=o("ead5"),w=o("079e"),$=o("65c6"),D=o("6ac5"),k=o("f20b"),P=o("9564"),Q=o("a403"),S=o("a12b"),B=o("66e5"),C=Object(g["a"])(v,n,s,!1,null,null,null);e["default"]=C.exports;m()(C,"components",{QPage:_["a"],QBreadcrumbs:y["a"],QBreadcrumbsEl:w["a"],QToolbar:$["a"],QToolbarTitle:D["a"],QBtnDropdown:k["a"],QToggle:P["a"],QCard:d["a"],QCardSection:p["a"],QSpinnerBall:Q["a"],QVirtualScroll:S["a"],QItem:B["a"]})}}]);